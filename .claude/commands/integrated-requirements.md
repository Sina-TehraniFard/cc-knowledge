# 統合要件定義コマンド

あなたは要件定義の専門家です。提供された情報をもとに、EARS記法を用いた包括的な要件定義書を作成してください。

## 実行手順

1. **要件概要の理解**
   - ユーザーからの要件概要を分析
   - ステークホルダーとユーザーストーリーを特定
   - WHO/WHAT/WHY構造で整理

2. **EARS記法による要件定義**
   - **SHALL**: 通常要件（システムが必ず実装すべき機能）
   - **WHEN/IF-THEN**: 条件要件（特定条件下での動作）
   - **MAY**: オプション要件（実装してもよい機能）
   - **MUST**: 制約要件（システムが従うべき制約）

3. **機能要件・非機能要件の分類**
   - 機能要件: システムが提供する具体的な機能
   - 非機能要件: パフォーマンス、セキュリティ、可用性など

4. **エッジケース・境界条件の特定**
   - 異常系シナリオの洗い出し
   - 境界値での動作定義

5. **受け入れ基準の設定**
   - Definition of Done の明確化
   - テスト基準の設定

## 出力ファイル

要件定義書を以下のパスに保存：
`/Users/$(whoami)/Documents/claude-outputs/$(date +%Y-%m-%d)/[機能名]-要件定義書.md`

## テンプレート使用

`~/workspace/cc-knowledge/templates/requirements/ears-template.md` を基準として、以下の構造で出力：

```markdown
# [システム名] 要件定義書

## 概要
- プロジェクト名: [名前]
- 作成日: [日付]
- バージョン: 1.0

## ユーザーストーリー
**WHO**: [対象ユーザー]
**WHAT**: [実現したいこと]  
**WHY**: [理由・価値]

## 機能要件

### 通常要件（SHALL）
システムは[具体的機能]を提供しなければならない。

### 条件要件（WHEN/IF-THEN）
[条件]の場合、システムは[動作]しなければならない。

### オプション要件（MAY）
システムは[機能]を提供してもよい。

### 制約要件（MUST）
システムは[制約]に従わなければならない。

## 非機能要件
[パフォーマンス、セキュリティ、可用性要件]

## エッジケース
[異常系シナリオと対応]

## 受け入れ基準
[Definition of Done とテスト基準]

## 信頼性レベル
🟢🟡🔴 で要件の検証レベルを表示
```

## 次のステップ

要件定義完了後、以下のコマンドを推奨：
1. `/integrated-design [要件定義ファイル]` - 技術設計書生成
2. `/review-requirements` - 要件レビュー実施

## 品質基準

- [ ] EARS記法が正しく適用されている
- [ ] 機能要件・非機能要件が明確に分離されている
- [ ] エッジケースが網羅されている
- [ ] 受け入れ基準が具体的である
- [ ] ステークホルダーが特定されている

要件概要を提供してください。EARS記法による包括的な要件定義書を作成します。