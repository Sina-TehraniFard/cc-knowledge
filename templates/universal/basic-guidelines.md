# Claude Code 基本ガイドライン

## 概要
このドキュメントは、Claude Codeを使用したプロジェクトの基本的なガイドラインです。
どのプロジェクトタイプでも共通して適用される原則と手順を記載しています。

## 基本原則

### 1. レポート駆動開発
- **すべての調査・分析・実装結果はレポート化**
- **自動出力パス**: `/Users/$(whoami)/Documents/claude-outputs/$(date +%Y-%m-%d)/`
- **目的**: ナレッジの蓄積と再利用促進

### 2. TDD（テスト駆動開発）
- Red-Green-Refactorサイクルの徹底
- テストファーストアプローチ
- 継続的リファクタリング

### 3. Clean Code
- 自己説明的なコード
- 適切な命名規則
- 単一責任原則

### 4. DRY（Don't Repeat Yourself）
- コードの重複排除
- 共通パターンの抽出
- 再利用性の向上

## ワークフロー

### 調査・分析フェーズ
1. **問題定義**: 課題の明確化
2. **調査実行**: 情報収集と分析
3. **レポート作成**: 発見事項の文書化（自動）
4. **Next Steps**: 次のアクション提案

### 設計フェーズ
1. **要件整理**: 機能要件・非機能要件の明確化
2. **アーキテクチャ設計**: システム構造の決定
3. **詳細設計**: 実装レベルの設計
4. **設計書作成**: 設計成果物の文書化

### 実装フェーズ
1. **Red**: 失敗するテストの作成
2. **Green**: 最小限の実装
3. **Refactor**: コード品質向上
4. **レビュー**: コード品質確認

### レビュー・改善フェーズ
1. **品質チェック**: コード品質の確認
2. **テストカバレッジ**: テスト網羅性の確認
3. **パフォーマンス**: 性能面の検討
4. **改善提案**: 継続的改善の提案

## ファイル構成

### 必須ディレクトリ
```
.claude/
├── commands/          # カスタムコマンド
├── knowledge/         # プロジェクト固有ナレッジ
│   ├── patterns/      # 実装パターン
│   └── lessons/       # 学習事項
└── scripts/           # 自動化スクリプト
```

### 推奨ディレクトリ
```
docs/
├── requirements/      # 要件定義
├── design/           # 設計書
├── guidelines/       # プロジェクト固有ガイドライン
└── reports/          # 各種レポート
```

## 品質基準

### コード品質
- **可読性**: 6ヶ月後の自分が理解できる
- **保守性**: 変更が容易
- **テスタビリティ**: テストしやすい構造
- **拡張性**: 機能追加が容易

### テスト品質
- **カバレッジ**: 80%以上を目標
- **意味のあるテスト**: 仕様を表現
- **高速性**: 迅速なフィードバック
- **信頼性**: 安定したテスト結果

### ドキュメント品質
- **最新性**: コードと同期
- **網羅性**: 必要な情報の包含
- **理解しやすさ**: 第三者が理解可能
- **実用性**: 実際の作業で活用可能

## 自動化レベル

### Level 1: 基本自動化
- テスト実行の自動化
- コードフォーマットの自動化
- 基本的なlintチェック

### Level 2: 統合自動化
- CI/CDパイプライン
- 自動デプロイ
- セキュリティスキャン

### Level 3: インテリジェント自動化
- AIによるコードレビュー
- 自動テスト生成
- パフォーマンス監視

## セキュリティ

### 基本原則
- **セキュアバイデザイン**: 設計段階からセキュリティ考慮
- **最小権限の原則**: 必要最小限のアクセス権
- **多層防御**: 複数のセキュリティ対策

### チェック項目
- [ ] 機密情報のハードコード禁止
- [ ] 入力値検証の実装
- [ ] 適切な認証・認可
- [ ] ログ出力時の機密情報除外

## パフォーマンス

### 基本方針
- **測定ファースト**: 推測より測定
- **ボトルネック特定**: 真の問題箇所の特定
- **段階的改善**: 小さな改善の積み重ね

### チェック項目
- [ ] レスポンス時間の測定
- [ ] メモリ使用量の監視
- [ ] データベースクエリの最適化
- [ ] キャッシュ戦略の検討

## Next Steps

### 新規プロジェクト開始時
1. `/integrated-requirements` で要件定義
2. `/integrated-design` で設計書作成
3. `/integrated-tasks` でタスク分解
4. `/integrated-implement` で実装開始

### 既存プロジェクト改善時
1. `/rev-requirements` で要件抽出
2. `/rev-design` で現状把握
3. `/rev-specs` で仕様書生成
4. 改善計画の策定

### 継続的改善
1. 定期的なコードレビュー
2. テストカバレッジの向上
3. パフォーマンス監視
4. セキュリティ監査

## 関連リソース

- [テストガイドライン](docs/guidelines/testing.md)
- [ナレッジベース](docs/knowledge/INDEX.md)
- [カスタムコマンド一覧](commands/)
- [テンプレート集](templates/)